(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"a+bl":function(t,r,o){"use strict";o.r(r),o.d(r,"Session5Module",function(){return $});var e=o("ofXK"),c=o("tyNb"),i=o("3Pt+");function n(t){return t&&t.value&&(t.value<=0||t.value>100)?{validStock:!0}:null}var u=o("fXoL"),b=o("AytR"),s=o("tk/3");let a=(()=>{class t{constructor(t){this.http=t}listar(){return this.http.get(`${b.a.urlBase}/productos`)}eliminar(t){return this.http.delete(`${b.a.urlBase}/productos/${t}`)}insertar(t){return this.http.post(`${b.a.urlBase}/productos`,t)}obtener(t){return this.http.get(`${b.a.urlBase}/productos/${t}`)}actualizar(t){return this.http.put(`${b.a.urlBase}/productos/${t.id}`,t)}}return t.\u0275fac=function(r){return new(r||t)(u.Yb(s.a))},t.\u0275prov=u.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var l=o("5eHb");let d=(()=>{class t{constructor(){}validate(t){return t&&t.value&&!/^[aA-zZ, " "]+$/.test(t.value)?{letters:!0}:null}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=u.Jb({type:t,selectors:[["","appOnlyLetters",""]],features:[u.Cb([{provide:i.h,useClass:t,multi:!0}])]}),t})(),p=(()=>{class t{constructor(t,r,o,e,c){this.fb=t,this.router=r,this.productoService=o,this.toastr=e,this.activatedRoute=c,this.form=new i.d({}),this.idproducto=0}ngOnInit(){this.inicializarFormulario(),this.activatedRoute.params.subscribe(t=>{t.id&&(this.idproducto=t.id,this.setProducto(t.id))})}setProducto(t){this.productoService.obtener(t).subscribe(t=>{this.form.setValue({nombre:t.nombre,stock:t.stock,precio:t.precio})})}inicializarFormulario(){this.form=this.fb.group({nombre:["",[i.q.required,i.q.minLength(3)]],stock:[null,[i.q.required,n]],precio:[null,[i.q.required]]})}get nombre(){return this.form.get("nombre")}get stock(){return this.form.get("stock")}get precio(){return this.form.get("precio")}cancelar(){this.router.navigate(["producto"])}guardar(){var t,r,o;if(this.form.invalid)return void this.form.markAllAsTouched();const e={id:this.idproducto,nombre:null===(t=this.nombre)||void 0===t?void 0:t.value,stock:null===(r=this.stock)||void 0===r?void 0:r.value,precio:null===(o=this.precio)||void 0===o?void 0:o.value,fecha:new Date};0===this.idproducto?this.insertar(e):this.actualizar(e)}insertar(t){this.productoService.insertar(t).subscribe(t=>{this.toastr.success("Producto registrado.","Confirmaci\xf3n"),this.router.navigate(["producto"])})}actualizar(t){this.productoService.actualizar(t).subscribe(t=>{this.toastr.success("Producto actualizado.","Confirmaci\xf3n"),this.router.navigate(["producto"])})}}return t.\u0275fac=function(r){return new(r||t)(u.Ob(i.b),u.Ob(c.b),u.Ob(a),u.Ob(l.b),u.Ob(c.a))},t.\u0275cmp=u.Ib({type:t,selectors:[["app-producto-form"]],decls:25,vars:1,consts:[[1,"row"],[1,"col-md-4"],[1,"form",3,"formGroup"],[1,"form-group"],[1,"form-label"],["type","text","formControlName","nombre","appOnlyLetters","",1,"form-control"],["type","text","formControlName","stock",1,"form-control"],["type","text","formControlName","precio",1,"form-control"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"btn","btn-light","btn-sm",3,"click"]],template:function(t,r){1&t&&(u.Ub(0,"h3"),u.uc(1,"Registrar Producto"),u.Tb(),u.Ub(2,"div",0),u.Ub(3,"div",1),u.Ub(4,"form",2),u.Ub(5,"div",3),u.Ub(6,"label",4),u.uc(7,"Nombre:"),u.Tb(),u.Pb(8,"input",5),u.Tb(),u.Ub(9,"div",3),u.Ub(10,"label",4),u.uc(11,"Stock:"),u.Tb(),u.Pb(12,"input",6),u.Tb(),u.Ub(13,"div",3),u.Ub(14,"label",4),u.uc(15,"Precio:"),u.Tb(),u.Pb(16,"input",7),u.Tb(),u.Pb(17,"hr"),u.Ub(18,"div",3),u.Ub(19,"button",8),u.bc("click",function(){return r.guardar()}),u.uc(20,"Guardar"),u.Tb(),u.Ub(21,"button",9),u.bc("click",function(){return r.cancelar()}),u.uc(22,"Cancelar"),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Pb(23,"div",1),u.Pb(24,"div",1),u.Tb()),2&t&&(u.Db(4),u.kc("formGroup",r.form))},directives:[i.r,i.j,i.e,i.a,i.i,i.c,d],styles:[""]}),t})();function m(t,r){1&t&&(u.Ub(0,"div",16),u.uc(1," * Nombre es obligatorio "),u.Tb())}function f(t,r){1&t&&(u.Ub(0,"div",16),u.uc(1," * M\xednimo 3 caracteres "),u.Tb())}function v(t,r){1&t&&(u.Ub(0,"div",16),u.uc(1," * Solo letras "),u.Tb())}function h(t,r){if(1&t&&(u.Ub(0,"div"),u.tc(1,m,2,0,"div",15),u.tc(2,f,2,0,"div",15),u.tc(3,v,2,0,"div",15),u.Tb()),2&t){u.dc();const t=u.mc(10);u.Db(1),u.kc("ngIf",null==t.errors?null:t.errors.required),u.Db(1),u.kc("ngIf",null==t.errors?null:t.errors.minlength),u.Db(1),u.kc("ngIf",null==t.errors?null:t.errors.letters)}}function g(t,r){1&t&&(u.Ub(0,"div",16),u.uc(1," * Stock es obligatorio "),u.Tb())}function T(t,r){1&t&&(u.Ub(0,"div",16),u.uc(1," * Solo n\xfameros "),u.Tb())}function U(t,r){if(1&t&&(u.Ub(0,"div"),u.tc(1,g,2,0,"div",15),u.tc(2,T,2,0,"div",15),u.Tb()),2&t){u.dc();const t=u.mc(16);u.Db(1),u.kc("ngIf",null==t.errors?null:t.errors.required),u.Db(1),u.kc("ngIf",null==t.errors?null:t.errors.pattern)}}function k(t,r){1&t&&(u.Ub(0,"div",16),u.uc(1," * Precio es obligatorio "),u.Tb())}function y(t,r){1&t&&(u.Ub(0,"div",16),u.uc(1," * N\xfameros m\xe1ximo 2 decimales "),u.Tb())}function P(t,r){if(1&t&&(u.Ub(0,"div"),u.tc(1,k,2,0,"div",15),u.tc(2,y,2,0,"div",15),u.Tb()),2&t){u.dc();const t=u.mc(22);u.Db(1),u.kc("ngIf",null==t.errors?null:t.errors.required),u.Db(1),u.kc("ngIf",null==t.errors?null:t.errors.pattern)}}let D=(()=>{class t{constructor(t,r,o){this.router=t,this.productoService=r,this.toastr=o}ngOnInit(){}cancelar(){this.router.navigate(["producto"])}guardar(t){if(console.log(t),t.invalid)return void Object.keys(t.controls).forEach(r=>{t.controls[r].markAsTouched()});const r={id:0,nombre:t.value.nombre,stock:t.value.stock,precio:t.value.precio,fecha:new Date};this.productoService.insertar(r).subscribe(t=>{this.toastr.success("Producto insertado.","Confirmaci\xf3n"),this.router.navigate(["producto"])})}}return t.\u0275fac=function(r){return new(r||t)(u.Ob(c.b),u.Ob(a),u.Ob(l.b))},t.\u0275cmp=u.Ib({type:t,selectors:[["app-producto-nuevo"]],decls:33,vars:3,consts:[[1,"row"],[1,"col-md-4"],[1,"form"],["form","ngForm"],[1,"form-group"],[1,"form-label"],["type","text","ngModel","","name","nombre","required","","minlength","3","appOnlyLetters","",1,"form-control"],["nombre","ngModel"],[4,"ngIf"],["type","text","ngModel","","name","stock","required","","pattern","^[0-9]+$",1,"form-control"],["stock","ngModel"],["type","text","ngModel","","name","precio","required","","pattern","^[0-9]+([/.][0-9]{1,2})?$",1,"form-control"],["precio","ngModel"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"btn","btn-light","btn-sm",3,"click"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(t,r){if(1&t){const t=u.Vb();u.Ub(0,"h3"),u.uc(1,"Nuevo Producto"),u.Tb(),u.Ub(2,"div",0),u.Ub(3,"div",1),u.Ub(4,"form",2,3),u.Ub(6,"div",4),u.Ub(7,"label",5),u.uc(8,"Nombre:"),u.Tb(),u.Pb(9,"input",6,7),u.tc(11,h,4,3,"div",8),u.Tb(),u.Ub(12,"div",4),u.Ub(13,"label",5),u.uc(14,"Stock:"),u.Tb(),u.Pb(15,"input",9,10),u.tc(17,U,3,2,"div",8),u.Tb(),u.Ub(18,"div",4),u.Ub(19,"label",5),u.uc(20,"Precio:"),u.Tb(),u.Pb(21,"input",11,12),u.tc(23,P,3,2,"div",8),u.Tb(),u.Pb(24,"hr"),u.Ub(25,"div",4),u.Ub(26,"button",13),u.bc("click",function(){u.nc(t);const o=u.mc(5);return r.guardar(o)}),u.uc(27,"Guardar"),u.Tb(),u.uc(28,"\xa0 "),u.Ub(29,"button",14),u.bc("click",function(){return r.cancelar()}),u.uc(30,"Cancelar"),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Pb(31,"div",1),u.Pb(32,"div",1),u.Tb()}if(2&t){const t=u.mc(10),r=u.mc(16),o=u.mc(22);u.Db(11),u.kc("ngIf",t.invalid&&(t.touched||t.dirty)),u.Db(6),u.kc("ngIf",r.invalid&&(r.touched||r.dirty)),u.Db(6),u.kc("ngIf",o.invalid&&(o.touched||o.dirty))}},directives:[i.r,i.j,i.k,i.a,i.i,i.l,i.p,i.g,d,e.l,i.n],styles:[""]}),t})();function O(t,r){if(1&t){const t=u.Vb();u.Ub(0,"tr"),u.Ub(1,"td"),u.uc(2),u.Tb(),u.Ub(3,"td"),u.uc(4),u.Tb(),u.Ub(5,"td"),u.uc(6),u.Tb(),u.Ub(7,"td"),u.uc(8),u.ec(9,"number"),u.Tb(),u.Ub(10,"td"),u.uc(11),u.ec(12,"date"),u.Tb(),u.Ub(13,"td"),u.Ub(14,"button",1),u.bc("click",function(){u.nc(t);const o=r.$implicit;return u.dc().editar(o.id)}),u.uc(15,"Editar"),u.Tb(),u.uc(16,"\xa0 "),u.Ub(17,"button",4),u.bc("click",function(){u.nc(t);const o=r.$implicit;return u.dc().eliminar(o.id)}),u.uc(18,"Eliminar"),u.Tb(),u.Tb(),u.Tb()}if(2&t){const t=r.$implicit;u.Db(2),u.vc(t.id),u.Db(2),u.vc(t.nombre),u.Db(2),u.vc(t.stock),u.Db(2),u.vc(u.gc(9,5,t.precio,".2-2")),u.Db(3),u.vc(u.gc(12,8,t.fecha,"dd/MM/yyyy"))}}let w=(()=>{class t{constructor(t,r,o){this.productoService=t,this.toastr=r,this.router=o,this.cliente={id:1,nombre:"juan",saldo:2,fecha:new Date("1968-11-16T00:00:00"),mostrarSaldo:function(){console.log("funcion de una interfaz")}},this.titulo="Listado de Productos",this.productos=[],console.log(this.cliente),console.log(this.cliente.mostrarSaldo)}ngOnInit(){this.listar()}listar(){this.productoService.listar().subscribe(t=>{this.productos=t})}eliminar(t){this.productoService.eliminar(t).subscribe(t=>{this.toastr.success("Producto eliminado","Confirmaci\xf3n"),this.listar()},t=>{console.log(t)},()=>{console.log("complete!")})}nuevo(){this.router.navigate(["producto/nuevo"])}nuevoReactivo(){this.router.navigate(["producto/form"])}editar(t){this.router.navigate(["producto/edit",t])}}return t.\u0275fac=function(r){return new(r||t)(u.Ob(a),u.Ob(l.b),u.Ob(c.b))},t.\u0275cmp=u.Ib({type:t,selectors:[["app-producto"]],decls:26,vars:2,consts:[[1,"btn","btn-primary","btn-sm",3,"click"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"table","table-striped","table-bordered","table-sm"],[4,"ngFor","ngForOf"],[1,"btn","btn-danger","btn-sm",3,"click"]],template:function(t,r){1&t&&(u.Ub(0,"h3"),u.uc(1),u.Tb(),u.Pb(2,"hr"),u.Ub(3,"button",0),u.bc("click",function(){return r.nuevo()}),u.uc(4,"Nuevo"),u.Tb(),u.uc(5,"\xa0 "),u.Ub(6,"button",1),u.bc("click",function(){return r.nuevoReactivo()}),u.uc(7,"Nuevo Reactivo"),u.Tb(),u.Pb(8,"hr"),u.Ub(9,"table",2),u.Ub(10,"thead"),u.Ub(11,"tr"),u.Ub(12,"th"),u.uc(13,"#"),u.Tb(),u.Ub(14,"th"),u.uc(15,"Nombre"),u.Tb(),u.Ub(16,"th"),u.uc(17,"Stock"),u.Tb(),u.Ub(18,"th"),u.uc(19,"Precio"),u.Tb(),u.Ub(20,"th"),u.uc(21,"Fecha"),u.Tb(),u.Ub(22,"th"),u.uc(23,"Acciones"),u.Tb(),u.Tb(),u.Tb(),u.Ub(24,"tbody"),u.tc(25,O,19,11,"tr",3),u.Tb(),u.Tb()),2&t&&(u.Db(1),u.vc(r.titulo),u.Db(24),u.kc("ngForOf",r.productos))},directives:[e.k],pipes:[e.e,e.d],styles:[""]}),t})();const I=[{path:"",component:o("0eC8").a,children:[{path:"producto",component:w},{path:"producto/nuevo",component:D},{path:"producto/form",component:p},{path:"producto/edit/:id",component:p}]}];let S=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=u.Mb({type:t}),t.\u0275inj=u.Lb({imports:[[c.e.forChild(I)],c.e]}),t})(),$=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=u.Mb({type:t}),t.\u0275inj=u.Lb({imports:[[e.b,i.f,i.o,S]]}),t})()}}]);